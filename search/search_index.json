{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"rdsa-utils","text":"<p>This site contains the project documentation for <code>rdsa-utils</code>, a suite of pyspark, pandas, and general pipeline utils for Reproducible Data Science and Analysis (RDSA) projects.</p>"},{"location":"#table-of-contents","title":"Table Of Contents","text":"<ol> <li>API Reference</li> <li>Contribution Guide</li> </ol> <p>Quickly find what you're looking for depending on your use case by looking at the different pages.</p>"},{"location":"#prerequisites","title":"Prerequisites","text":"<p>The following prerequisites are required for <code>rdsa-utils</code>:</p> <ul> <li>Python 3.8 or higher</li> <li>Poetry</li> </ul>"},{"location":"contribution_guide/","title":"Contribution Guide","text":"<p>We welcome contributions. To contribute, please follow these guidelines:</p>"},{"location":"contribution_guide/#pull-requests","title":"Pull Requests","text":"<ul> <li>All pull requests should be made to the <code>dev</code> branch, named <code>dev_&lt;feature_name&gt;</code>.</li> <li>Please make sure that your code passes all unit tests before submitting a pull request.</li> <li>Include unit tests with your code changes whenever possible, preferably written in pytest format.</li> <li>Make sure that all existing unit tests still pass with your code changes.</li> <li>Please ensure that your code is compliant with the project's coding style guidelines, which include:</li> <li>Writing docstrings in Scipy/numpy style format.</li> <li>Using type hints in Python functions.</li> <li>Adhering to the PEP 8 style guide for Python code.</li> <li>No wildcard imports.</li> <li>Import PySpark functions as <code>F</code>.</li> <li>Providing well-documented and easy-to-understand code, including clear variable and function names, as well as explanatory comments where necessary.</li> <li>If you are making a significant change to the codebase, please make sure to update the documentation to reflect the changes.</li> <li>If you are adding new functionality, please provide examples of how to use it in the project's documentation or in a separate README file.</li> <li>If you are fixing a bug, please include a description of the bug and how your changes address it.</li> <li>If you are adding a new dependency, please include a brief explanation of why it is necessary and what it does.</li> <li>If you are making significant changes to the project's architecture or design, please discuss your ideas with the project maintainers first to ensure they align with the project's goals and vision.</li> </ul>"},{"location":"contribution_guide/#issues","title":"Issues","text":"<p>If you find a bug or would like to request a feature, please open an issue on the project's GitHub page. When opening an issue, please provide as much detail as possible, including:</p> <ul> <li>A clear and descriptive title.</li> <li>A description of the problem you're experiencing, including steps to reproduce it.</li> <li>Any error messages or logs related to the issue.</li> <li>Your operating system and Python version (if relevant).</li> </ul> <p>Please search through the existing issues before opening a new one to avoid duplicates. If you find an existing issue that covers your problem, please add any additional information as a comment. Issues will be triaged and prioritized by the project maintainers.</p> <p>If you would like to contribute to the project by fixing an existing issue, please leave a comment on the issue to let the maintainers know that you are working on it.</p>"},{"location":"contribution_guide/#getting-started","title":"Getting Started","text":""},{"location":"contribution_guide/#installing-python","title":"Installing Python","text":"<p>Before getting started, you need to have Python 3.8 or higher installed on your system. You can download Python from the official website. Make sure to add Python to your <code>PATH</code> during the installation process.</p> <p>Alternatively, you can use Anaconda to create a Python 3.8 or higher virtual environment. Anaconda is a popular Python distribution that comes with many pre-installed scientific computing packages and tools. Here's how to create a new environment with Anaconda:</p> <ol> <li>Download and install Anaconda from the official website.</li> <li>Open the Anaconda prompt.</li> <li> <p>Create a new virtual environment with Python 3.8 or higher:</p> <p><code>conda create --name myenv python=3.8</code> 4. Activate the virtual environment:</p> <p><code>conda activate myenv</code></p> </li> </ol>"},{"location":"contribution_guide/#installing-poetry","title":"Installing Poetry","text":"<p>Poetry is a dependency management and packaging tool for Python projects. To install Poetry into your virtual environment, use the following command:</p> <pre><code>pip install poetry\n</code></pre> <p>For more detailed installation instructions and troubleshooting, please visit the official Poetry documentation.</p>"},{"location":"contribution_guide/#clone-the-repository","title":"Clone the Repository","text":"<p>Clone the repository to your local machine:</p> <pre><code>git clone https://github.com/ONSdigital/rdsa-utils.git\ncd rdsa-utils\n</code></pre>"},{"location":"contribution_guide/#set-up-the-development-environment","title":"Set Up the Development Environment","text":"<p>To set up the development environment and install the required dependencies, run the following command:</p> <pre><code>poetry install\n</code></pre> <p>This command will create a virtual environment and install all the dependencies specified in the <code>pyproject.toml</code> file.</p> <p>If you're working on Google Cloud Platform (GCP) and want to save memory on Cloud Shell, you can use the <code>--no-cache</code> option:</p> <pre><code>poetry install --no-cache\n</code></pre> <p>This command installs the required dependencies without using the cache, which can save memory on the Cloud Shell.</p>"},{"location":"contribution_guide/#activate-the-virtual-environment","title":"Activate the Virtual Environment","text":"<p>To activate the virtual environment, run the following command:</p> <pre><code>poetry shell\n</code></pre>"},{"location":"contribution_guide/#running-tests","title":"Running Tests","text":"<p>You can run tests (if any) using the following command:</p> <pre><code>poetry run pytest\n</code></pre>"},{"location":"contribution_guide/#installing-pre-commit-hooks-in-your-development-environment","title":"Installing Pre-commit Hooks in Your Development Environment","text":"<p>To improve code quality and maintain a consistent coding style, we use pre-commit hooks in this repository. The following steps will guide you through the process of setting up pre-commit hooks in your development environment.</p>"},{"location":"contribution_guide/#installation-steps","title":"Installation Steps","text":"<ol> <li>Install pre-commit: Open a terminal and run the following command to install the <code>pre-commit</code> package:</li> </ol> <pre><code>pip install pre-commit\n</code></pre> <p>This command installs the pre-commit tool, which manages the pre-commit hooks for this repository.</p> <ol> <li>Install pre-commit hooks: Run the following command to install the pre-commit hooks defined in the <code>.pre-commit-config.yaml</code> file:</li> </ol> <pre><code>pre-commit install\n</code></pre> <p>This command sets up the pre-commit hooks to run automatically before each commit.</p>"},{"location":"contribution_guide/#usage","title":"Usage","text":"<p>Now that you have installed the pre-commit hooks, they will run automatically before each commit. If any of the hooks fail, the commit will be aborted, and you will need to fix the issues before trying again.</p> <p>You can also run the pre-commit hooks manually at any time using the following command:</p> <pre><code>pre-commit run --all-files\n</code></pre> <p>This command runs all the pre-commit hooks on all the files in the repository, allowing you to check your code before committing.</p> <p>By following these steps, you can ensure that your development environment is set up to use the pre-commit hooks, helping to maintain a clean and consistent codebase.</p>"},{"location":"reference/","title":"API Reference","text":"<p>This part of the project documentation focuses on an information-oriented approach. Use it as a reference for the technical implementation of the<code>rdsa-utils</code> codebase.</p>"},{"location":"reference/#rdsa_utils.test_utils","title":"<code>rdsa_utils.test_utils</code>","text":"<p>Functions and fixtures used with test suites.</p>"},{"location":"reference/#rdsa_utils.test_utils.Case","title":"<code>Case(label: Optional[str] = None, marks: Optional[MarkDecorator] = None, **kwargs)</code>","text":"<p>Container for a test case, with optional test ID.</p> <p>The Case class is to be used in conjunction with <code>parameterize_cases</code>.</p> <p>Attributes:</p> Name Type Description <code>    label</code> <pre><code>Optional test ID. Will be displayed for each test when\nrunning `pytest -v`.\n</code></pre> <p>marks     Optional pytest marks to denote any tests to skip etc. kwargs     Parameters used for the test cases.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; Case(label=\"some test name\", foo=10, bar=\"some value\")\n\n&gt;&gt;&gt; Case(\n&gt;&gt;&gt;     label=\"some test name\",\n&gt;&gt;&gt;     marks=pytest.mark.skip(reason='not implemented'),\n&gt;&gt;&gt;     foo=10,\n&gt;&gt;&gt;     bar=\"some value\"\n&gt;&gt;&gt; )\n</code></pre>"},{"location":"reference/#rdsa_utils.test_utils.Case--see-also","title":"See Also","text":"<p>Modified from https://github.com/ckp95/pytest-parametrize-cases to allow pytest mark usage.</p> <p>Initialise objects.</p>"},{"location":"reference/#rdsa_utils.test_utils.Case.__repr__","title":"<code>__repr__() -&gt; str</code>","text":"<p>Return string.</p>"},{"location":"reference/#rdsa_utils.test_utils.create_dataframe","title":"<code>create_dataframe(data: List[Tuple[str]], **kwargs) -&gt; pd.DataFrame</code>","text":"<p>Create pandas df from tuple data with a header.</p>"},{"location":"reference/#rdsa_utils.test_utils.create_spark_df","title":"<code>create_spark_df(spark_session)</code>","text":"<p>Create Spark DataFrame from tuple data with first row as schema.</p>"},{"location":"reference/#rdsa_utils.test_utils.create_spark_df--example","title":"Example:","text":"<p>create_spark_df([     ('column1', 'column2', 'column3'),     ('aaaa', 1, 1.1) ])</p> <p>Can specify the schema alongside the column names: create_spark_df([     ('column1 STRING, column2 INT, column3 DOUBLE'),     ('aaaa', 1, 1.1) ])</p>"},{"location":"reference/#rdsa_utils.test_utils.parametrize_cases","title":"<code>parametrize_cases(*cases: Case)</code>","text":"<p>More user friendly parameterize cases testing.</p> <p>Utilise as a decorator on top of test function.</p> <p>Examples:</p> <pre><code>@parameterize_cases(\n    Case(\n        label=\"some test name\",\n        foo=10,\n        bar=\"some value\"\n    ),\n    Case(\n        label=\"some test name #2\",\n        foo=20,\n        bar=\"some other value\"\n    ),\n)\ndef test(foo, bar):\n    ...\n</code></pre>"},{"location":"reference/#rdsa_utils.test_utils.parametrize_cases--see-also","title":"See Also","text":"<p>Source: https://github.com/ckp95/pytest-parametrize-cases</p>"},{"location":"reference/#rdsa_utils.test_utils.spark_session","title":"<code>spark_session()</code>","text":"<p>Set up spark session fixture.</p>"},{"location":"reference/#rdsa_utils.test_utils.suppress_py4j_logging","title":"<code>suppress_py4j_logging()</code>","text":"<p>Suppress spark logging.</p>"},{"location":"reference/#rdsa_utils.test_utils.to_date","title":"<code>to_date(dt: str) -&gt; datetime.date</code>","text":"<p>Convert date string to datetime.date type.</p>"},{"location":"reference/#rdsa_utils.test_utils.to_datetime","title":"<code>to_datetime(dt: str) -&gt; datetime.datetime</code>","text":"<p>Convert datetime string to datetime.datetime type.</p>"},{"location":"reference/#rdsa_utils.test_utils.to_spark","title":"<code>to_spark(spark_session)</code>","text":"<p>Convert pandas df to spark.</p>"}]}